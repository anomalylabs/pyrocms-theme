// Excards wrapper color
$excardWrapperBakchroundColor:#f9f9f9;

// Default state
$excardColor: #fff;
$excardBackgroundColor: $pink;

// Default hover state
$excardHoverColor: #fff;
$excardHoverBackgroundColor: $purple;

//Active State
$excardActiveColor: #fff;
$excardActiveBackgroundColor: $blue;

// Expander color
$excardExpanderBackgroundColor:#f3f3f3;



.m-excards
{
    &__cards
    {
        display: flex;

        padding: 15px;

        background: $excardWrapperBakchroundColor;

        flex-flow: row wrap;;
    }

    &__card
    {
        width: calc((100% / 3) - 30px);
        margin: 15px;

        transition: all .2s ease-in-out;

        //background: blue;

        @media screen and (max-width: 991px)
        {
            width: calc((100% / 2) - 30px);
        }

        @media screen and (max-width: 767px)
        {
            width: 100%;
        }

        &:hover &Inner
        {

            background-color: $excardHoverBackgroundColor;
            color:$excardHoverColor;
        }

        &Inner
        {
            font-size: 1.5em;

            position: relative;

            width: 100%;
            padding: 30px;

            cursor: pointer;
            transition: all .2s ease-in-out;
            text-align: center;
            text-transform: uppercase;

            color: $excardColor;
            background-color: $excardBackgroundColor;

            &:after
            {
                transition: all .3s ease-in-out;
            }
        }
        &Expander
        {
            font-size: 1.5em;

            position: relative;

            display: flex;

            width: 100%;
            .inner
            {
                padding:15px;
            }

            transition: all .2s ease-in-out;
            text-transform: uppercase;

            background-color: $excardExpanderBackgroundColor;

            justify-content: center;
            align-items: center;
        }

        &.is-collapsed
        {
            // background:black;
            .m-excards__cardInner
            {
                &:after
                {
                    content: '';

                    opacity: 0;
                }
            }
            .m-excards__cardExpander
            {
                overflow: hidden;

                min-height: 0;
                max-height: 0;
                margin-top: 0;

                opacity: 0;
            }
        }

        &.is-expanded
        {
            .m-excards__cardInner
            {
                color: $excardActiveColor;
                background-color: $excardActiveBackgroundColor;

                &:after
                {
                    position: absolute;
                    bottom: -30px;
                    left: calc(50% - 15px);

                    display: block;

                    width: 0;
                    height: 0;

                    content: '';

                    opacity: 1;
                    border-right: 15px solid transparent;
                    border-bottom: 15px solid $excardExpanderBackgroundColor;
                    border-left: 15px solid transparent;
                }
            }
            .m-excards__cardExpander
            {
                overflow: visible;

                min-height: 200px;
                max-height: 1000px;
                margin-top: 30px;

                opacity: 1;
            }

            &:hover
            {
                &Inner
                {
                }
            }
        }

        &.is-inactive
        {
            .m-excards__cardInner
            {
                pointer-events: none;

                opacity: .5;
            }
            &:hover
            {
                .m-excards__cardInner
                {
                    //background-color: tomato;
                }
            }
        }
    }
}


//Expander Widths

//when 3 cards in a row
@media screen and (min-width: 992px)
{
    .m-excards__card:nth-of-type(3n+2) .m-excards__cardExpander
    {
        margin-left: calc(-100% - 30px);
    }
    .m-excards__card:nth-of-type(3n+3) .m-excards__cardExpander
    {
        margin-left: calc(-200% - 60px);
    }
    .m-excards__card:nth-of-type(3n+4)
    {
        clear: left;
    }
    .m-excards__cardExpander
    {
        width: calc(300% + 60px);
    }
}

//when 2 cards in a row
@media screen and (min-width: 768px) and (max-width: 991px)
{
    .m-excards__card:nth-of-type(2n+2) .m-excards__cardExpander
    {
        margin-left: calc(-100% - 30px);
    }
    .m-excards__card:nth-of-type(2n+3)
    {
        clear: left;
    }
    .m-excards__cardExpander
    {
        width: calc(200% + 30px);
    }
}
